# 設定項目

キャラ図鑑の各種設定について説明します。

## 設定メニューの開き方

1. ハンバーガーメニュー（☰）をクリック
2. 「設定」セクション内の各項目を選択

## テーマ設定

3つのテーマから選択できます。

### ライトテーマ

#### 特徴
- 明るい背景色
- 黒または濃いグレーの文字
- 高いコントラスト
- 日中の使用に最適

#### カラー
- 背景: 白 (#FFFFFF)
- 文字: 黒 (#333333)
- アクセント: オレンジ (#ff6b35)

### ダークテーマ

#### 特徴
- 暗い背景色
- 白または明るいグレーの文字
- 目に優しい
- 夜間の使用に最適

#### カラー
- 背景: ダークブルー (#1a2540)
- 文字: 白 (#e9eaf6)
- アクセント: ゴールド (#f39c12)

### モダンテーマ

#### 特徴
- グラデーション背景
- カラフルなUI
- スタイリッシュなデザイン
- 個性的な表示

#### カラー
- 背景: グラデーション (紫〜青)
- 文字: ダーク (#2c3e50)
- アクセント: 多彩

### テーマの切り替え

#### 手順
1. ハンバーガーメニューを開く
2. 「テーマ切替 (現在: ○○)」をクリック
3. 3つのテーマが順番に切り替わります

#### 切り替えサイクル
ライト → ダーク → モダン → ライト → ...

### 保存
選択したテーマはlocalStorageに保存され、次回も維持されます。
- 保存キー: `theme`
- 保存値: `light` | `dark` | `modern`

## 言語設定

日本語と英語の2言語に対応しています。

### 切り替え可能な要素

#### キャラクター情報
- 名前
- 世界名
- 種族名
- 戦闘スタイル名
- 属性名
- グループ名
- 武器名
- 武器種別

#### UI要素
- ボタンのラベル
- メニュー項目
- フィルター名
- エラーメッセージ
- ヘルプテキスト

### 言語の切り替え

#### 手順
1. ハンバーガーメニューを開く
2. 「言語切替 (現在: 日本語/English)」をクリック
3. 日本語と英語が切り替わります

### 保存
選択した言語はlocalStorageに保存されます。
- 保存キー: `language`
- 保存値: `ja` | `en`

### 検索への影響
- 両言語の名前で検索が可能
- 表示言語に関わらず、両方の言語でヒット
- 予測変換も両言語対応

## 武器アイコン表示設定

カードに表示される武器アイコンの表示方法を設定できます。

### 表示モード

#### 1. 常に表示
全てのカードに武器アイコンを常時表示します。

**用途:**
- 武器を常に確認したい
- 武器で視覚的に識別したい

**メリット:**
- 一目で武器がわかる
- 視覚的な情報量が多い

**デメリット:**
- カードがやや混雑する

#### 2. フィルター時のみ（デフォルト）
フィルターを適用している時のみ武器アイコンを表示します。

**用途:**
- 通常は武器を非表示
- フィルター時だけ確認

**メリット:**
- 通常時はスッキリ
- 必要な時だけ表示

**デメリット:**
- 通常時は武器がわからない

#### 3. 非表示
武器アイコンを一切表示しません。

**用途:**
- キャラクター画像だけを見たい
- シンプルな表示が好み

**メリット:**
- 最もスッキリ
- カードが見やすい

**デメリット:**
- 武器情報が見えない

### 切り替え方法

#### 手順
1. ハンバーガーメニューを開く
2. 「武器アイコン: ○○」をクリック
3. 3つのモードが順番に切り替わります

#### 切り替えサイクル
フィルター時のみ → 常に表示 → 非表示 → フィルター時のみ → ...

### 保存
設定はlocalStorageに保存されます。
- 保存キー: `weaponIconDisplay`
- 保存値: `always` | `filter` | `never`

## 武器検索設定

武器名でキャラクターを検索できるかどうかを設定します。

### 有効時の動作
- 検索バーに武器名を入力すると、その武器を装備しているキャラクターが表示される
- 予測変換に武器名も表示される

**例:**
- 検索: "エクスカリバー"
- 結果: エクスカリバーを装備しているキャラクターが表示

### 無効時の動作
- 武器名での検索は行われない
- 予測変換に武器名は表示されない
- キャラクター名のみで検索

### 切り替え方法

#### 手順
1. ハンバーガーメニューを開く
2. 「武器検索: 有効/無効」をクリック
3. 有効/無効が切り替わります

### 保存
設定はlocalStorageに保存されます。
- 保存キー: `weaponSearchEnabled`
- 保存値: `true` | `false`

## カスタムタグ検索設定

カスタムタグ名でキャラクターを検索できるかどうかを設定します。

### 有効時の動作
- 検索バーにタグ名を入力すると、そのタグを持つキャラクターが表示される
- 予測変換にタグ名も表示される

**例:**
- 検索: "お気に入り"
- 結果: 「お気に入り」タグを持つキャラクターが表示

### 無効時の動作
- タグ名での検索は行われない
- 予測変換にタグ名は表示されない
- キャラクター名と武器名のみで検索

### 切り替え方法

#### 手順
1. ハンバーガーメニューを開く
2. 「カスタムタグ検索: 有効/無効」をクリック
3. 有効/無効が切り替わります

### 保存
設定はlocalStorageに保存されます。
- 保存キー: `customTagSearchEnabled`
- 保存値: `true` | `false`

## 予測変換の強調表示設定

検索予測変換で一致部分を強調表示するかどうかを設定します。

### 有効時の動作
予測候補の一致部分が太字で表示されます。

**例:**
- 入力: "アリ"
- 表示: "**アリ**ス"、"**アリ**エル"

### 無効時の動作
予測候補は通常のテキストで表示されます。

**例:**
- 入力: "アリ"
- 表示: "アリス"、"アリエル"

### 切り替え方法

#### 手順
1. ハンバーガーメニューを開く
2. 「強調表示: 有効/無効」をクリック
3. 有効/無効が切り替わります

### 保存
設定はlocalStorageに保存されます。
- 保存キー: `highlightEnabled`
- 保存値: `true` | `false`

## 並び順設定

キャラクターの並び順を設定します。

### 設定方法
1. ハンバーガーメニューを開く
2. 「並び順: ○○」をクリック
3. 4つのモードが順番に切り替わります

詳細は [並び替え機能](./sorting.md) を参照。

## 設定のリセット

### 個別設定のリセット
各設定は個別にデフォルト値に戻すことができます:
- テーマ: ライトテーマに戻す
- 言語: 日本語に戻す
- その他: 各設定のデフォルト値に戻す

### 全設定のリセット
データ管理から全データを削除すると、全ての設定がリセットされます。

**注意:** 全データを削除すると、キャラクターデータやカスタムタグも削除されます。

## 設定のエクスポート/インポート

### 現在の仕様
設定は個別にlocalStorageに保存されるため、直接的なエクスポート/インポート機能はありません。

### ブラウザ間での設定移行
1. 新しいブラウザで設定を手動で再設定
2. または、ブラウザの同期機能を利用（Chrome、Firefox等）

## デフォルト設定

### 初回起動時の設定
```javascript
{
  theme: 'light',                    // テーマ: ライト
  language: 'ja',                    // 言語: 日本語
  weaponIconDisplay: 'filter',       // 武器アイコン: フィルター時のみ
  weaponSearchEnabled: true,         // 武器検索: 有効
  customTagSearchEnabled: true,      // タグ検索: 有効
  highlightEnabled: true,            // 強調表示: 有効
  sortOrder: 'id'                    // 並び順: ID順
}
```

## 設定の保存先

### localStorage

全ての設定はlocalStorageに保存されます。

#### 保存されるキー
```javascript
localStorage.setItem('theme', 'light')
localStorage.setItem('language', 'ja')
localStorage.setItem('weaponIconDisplay', 'filter')
localStorage.setItem('weaponSearchEnabled', 'true')
localStorage.setItem('customTagSearchEnabled', 'true')
localStorage.setItem('highlightEnabled', 'true')
localStorage.setItem('sortOrder', 'id')
localStorage.setItem('customCharacterOrder', '[]')
localStorage.setItem('tagSortOrders', '{}')
localStorage.setItem('tagCustomOrders', '{}')
```

### 容量
localStorageの容量制限:
- 一般的なブラウザ: 5〜10MB
- 設定データ: 数KB程度（十分小さい）

## トラブルシューティング

### 設定が保存されない
1. localStorageが有効か確認
2. プライベートモードでないか確認
3. ブラウザのストレージ容量を確認
4. セキュリティ設定を確認

### 設定がリセットされる
1. ブラウザのデータ削除を行っていないか確認
2. プライベートモードを使用していないか確認
3. 別のブラウザやプロファイルを使用していないか確認

### テーマが適用されない
1. ページをリロード
2. キャッシュをクリア
3. ブラウザのコンソールでエラーを確認

### 言語が切り替わらない
1. ページをリロード
2. データが正しく読み込まれているか確認
3. ブラウザのコンソールでエラーを確認

### 武器アイコンが表示されない/消えない
1. 設定を確認
2. フィルターの状態を確認
3. ページをリロード

### 検索が正しく動作しない
1. 武器検索/タグ検索の設定を確認
2. 検索バーをクリア
3. ページをリロード

## ベストプラクティス

### テーマの選択
- **日中の使用**: ライトテーマ
- **夜間の使用**: ダークテーマ
- **個性を出したい**: モダンテーマ

### 言語の選択
- **日本語ネイティブ**: 日本語
- **英語学習**: 英語
- **多言語対応確認**: 切り替えて確認

### 武器アイコン表示
- **武器重視**: 常に表示
- **バランス**: フィルター時のみ（デフォルト）
- **シンプル**: 非表示

### 検索設定
- **武器で探す**: 武器検索を有効
- **タグで探す**: タグ検索を有効
- **シンプルな検索**: 両方とも無効

### パフォーマンス最適化
- 大量データの場合は予測変換の強調表示を無効化
- 不要な検索機能は無効化

## アクセシビリティ

### 視覚的配慮
- ダークテーマ: 眼精疲労の軽減
- 強調表示: 検索結果の視認性向上
- 高コントラスト: ライトテーマ

### 操作性
- キーボードショートカット対応
- タッチ操作最適化
- レスポンシブデザイン

### 多言語対応
- 日本語/英語完全対応
- 設定UIも多言語化
- フォントの最適化
