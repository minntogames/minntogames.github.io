/* MOTHER2風戦闘背景アニメーション */

/* 基本の背景コンテナ - 画像エリア専用 */
.battle-background {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    z-index: 0;
    opacity: 0.8;
    border-radius: inherit;
    pointer-events: none;
}

/* 画像エリア専用背景 */
.character-image .battle-background {
    border-radius: 8px;
}

/* デバッグ用: 背景を強調表示 */
.battle-background.bg-psychedelic,
.battle-background.bg-geometric,
.battle-background.bg-energy,
.battle-background.bg-starfield,
.battle-background.bg-liquid,
.battle-background.bg-glitch,
.battle-background.bg-crystal,
.battle-background.bg-wave,
.battle-background.bg-ripple {
    opacity: 0.9 !important;
    z-index: 0 !important;
}

.character-card {
    position: relative;
    z-index: 2;
}

/* 背景タイプ1: サイケデリック波模様 */
.bg-psychedelic {
    background: linear-gradient(45deg, 
        #ff0080, #8000ff, #0080ff, #00ff80, 
        #ff8000, #ff0080, #8000ff, #0080ff);
    background-size: 400% 400%;
    animation: psychedelicWave 8s ease-in-out infinite;
}

@keyframes psychedelicWave {
    0%, 100% {
        background-position: 0% 50%;
        filter: hue-rotate(0deg) contrast(1.2);
    }
    25% {
        background-position: 100% 0%;
        filter: hue-rotate(90deg) contrast(1.5);
    }
    50% {
        background-position: 100% 100%;
        filter: hue-rotate(180deg) contrast(1.8);
    }
    75% {
        background-position: 0% 100%;
        filter: hue-rotate(270deg) contrast(1.5);
    }
}

/* 背景タイプ2: 回転する幾何学模様 */
.bg-geometric {
    background: 
        radial-gradient(circle at 30% 30%, #ff6b6b 0%, transparent 50%),
        radial-gradient(circle at 70% 70%, #4ecdc4 0%, transparent 50%),
        radial-gradient(circle at 50% 10%, #45b7d1 0%, transparent 50%),
        radial-gradient(circle at 20% 80%, #f9ca24 0%, transparent 50%),
        linear-gradient(45deg, #6c5ce7, #a29bfe);
    animation: geometricRotate 12s linear infinite;
}

@keyframes geometricRotate {
    0% {
        transform: rotate(0deg) scale(1);
        filter: hue-rotate(0deg);
    }
    25% {
        transform: rotate(90deg) scale(1.1);
        filter: hue-rotate(45deg);
    }
    50% {
        transform: rotate(180deg) scale(1);
        filter: hue-rotate(90deg);
    }
    75% {
        transform: rotate(270deg) scale(1.1);
        filter: hue-rotate(135deg);
    }
    100% {
        transform: rotate(360deg) scale(1);
        filter: hue-rotate(180deg);
    }
}

/* 背景タイプ3: エネルギー波動 */
.bg-energy {
    background: 
        repeating-linear-gradient(
            45deg,
            #ff3366 0px,
            #ff3366 10px,
            #3366ff 10px,
            #3366ff 20px,
            #33ff66 20px,
            #33ff66 30px,
            #ffff33 30px,
            #ffff33 40px
        );
    background-size: 200% 200%;
    animation: energyPulse 6s ease-in-out infinite;
}

@keyframes energyPulse {
    0%, 100% {
        background-position: 0% 0%;
        opacity: 0.4;
        transform: scale(1);
    }
    25% {
        background-position: 100% 0%;
        opacity: 0.7;
        transform: scale(1.05);
    }
    50% {
        background-position: 100% 100%;
        opacity: 0.9;
        transform: scale(1.1);
    }
    75% {
        background-position: 0% 100%;
        opacity: 0.7;
        transform: scale(1.05);
    }
}

/* 背景タイプ4: 星空ワープ */
.bg-starfield {
    background: radial-gradient(2px 2px at 20px 30px, #eee, transparent),
                radial-gradient(2px 2px at 40px 70px, #fff, transparent),
                radial-gradient(1px 1px at 90px 40px, #fff, transparent),
                radial-gradient(1px 1px at 130px 80px, #fff, transparent),
                radial-gradient(2px 2px at 160px 30px, #ddd, transparent),
                linear-gradient(45deg, #000428, #004e92);
    background-repeat: repeat;
    background-size: 200px 100px;
    animation: starfieldMove 15s linear infinite;
}

@keyframes starfieldMove {
    0% {
        transform: translateY(0) scale(1);
        background-position: 0 0;
    }
    100% {
        transform: translateY(-100px) scale(1.2);
        background-position: -200px -100px;
    }
}

/* 背景タイプ5: 液体金属 */
.bg-liquid {
    background: 
        radial-gradient(ellipse at top, #667eea 0%, transparent 70%),
        radial-gradient(ellipse at bottom, #764ba2 0%, transparent 70%),
        linear-gradient(45deg, #f093fb 0%, #f5576c 50%, #4facfe 100%);
    background-size: 300% 300%;
    animation: liquidFlow 10s ease-in-out infinite;
}

@keyframes liquidFlow {
    0%, 100% {
        background-position: 0% 0%, 100% 100%, 0% 50%;
        filter: blur(0px) saturate(1);
    }
    33% {
        background-position: 100% 0%, 0% 100%, 100% 50%;
        filter: blur(1px) saturate(1.2);
    }
    66% {
        background-position: 50% 100%, 50% 0%, 50% 50%;
        filter: blur(0.5px) saturate(1.5);
    }
}

/* 背景タイプ6: デジタルグリッチ */
.bg-glitch {
    background: 
        linear-gradient(90deg, #ff0000 0%, #00ff00 50%, #0000ff 100%),
        linear-gradient(0deg, #ffff00 0%, #ff00ff 50%, #00ffff 100%);
    background-size: 100% 100%, 50% 50%;
    background-blend-mode: difference;
    animation: glitchEffect 4s steps(10) infinite;
}

@keyframes glitchEffect {
    0%, 100% {
        background-position: 0% 0%, 0% 0%;
        filter: contrast(1) brightness(1);
    }
    10% {
        background-position: 2% 0%, 0% 0%;
        filter: contrast(1.5) brightness(1.2);
    }
    20% {
        background-position: -2% 0%, 0% 0%;
        filter: contrast(2) brightness(0.8);
    }
    30% {
        background-position: 0% 2%, 0% 0%;
        filter: contrast(1) brightness(1.5);
    }
    40% {
        background-position: 0% -2%, 0% 0%;
        filter: contrast(1.8) brightness(0.9);
    }
    50% {
        background-position: 0% 0%, 2% 0%;
        filter: contrast(1.2) brightness(1.3);
    }
    60% {
        background-position: 0% 0%, -2% 0%;
        filter: contrast(2.2) brightness(0.7);
    }
    70% {
        background-position: 1% 1%, 1% 1%;
        filter: contrast(1.6) brightness(1.1);
    }
    80% {
        background-position: -1% -1%, -1% -1%;
        filter: contrast(1.9) brightness(0.9);
    }
    90% {
        background-position: 0% 0%, 0% 0%;
        filter: contrast(1.3) brightness(1.2);
    }
}

/* 背景タイプ7: クリスタル */
.bg-crystal {
    background: 
        conic-gradient(from 0deg at 50% 50%, 
            #ff006e, #8338ec, #3a86ff, #06ffa5, 
            #ffbe0b, #fb5607, #ff006e),
        radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.3) 0%, transparent 50%),
        radial-gradient(circle at 70% 70%, rgba(255, 255, 255, 0.2) 0%, transparent 30%);
    background-size: 200% 200%, 100% 100%, 100% 100%;
    animation: crystalShine 8s ease-in-out infinite;
}

@keyframes crystalShine {
    0%, 100% {
        background-position: 0% 50%, 30% 30%, 70% 70%;
        filter: brightness(1) saturate(1);
    }
    25% {
        background-position: 25% 75%, 40% 20%, 60% 80%;
        filter: brightness(1.3) saturate(1.2);
    }
    50% {
        background-position: 50% 100%, 50% 10%, 50% 90%;
        filter: brightness(1.5) saturate(1.5);
    }
    75% {
        background-position: 75% 25%, 60% 40%, 40% 60%;
        filter: brightness(1.3) saturate(1.2);
    }
}

/* 背景タイプ8: 対称波動（2層） */
.bg-wave {
    background: 
        /* 前面の波パターン */
        radial-gradient(ellipse at 20% 50%, 
            rgba(255, 100, 255, 0.8) 0%, 
            transparent 50%),
        radial-gradient(ellipse at 80% 50%, 
            rgba(100, 255, 255, 0.8) 0%, 
            transparent 50%),
        /* 背面の波パターン */
        radial-gradient(ellipse at 50% 20%, 
            rgba(255, 255, 100, 0.6) 0%, 
            transparent 50%),
        radial-gradient(ellipse at 50% 80%, 
            rgba(100, 255, 100, 0.6) 0%, 
            transparent 50%),
        /* ベース背景 */
        linear-gradient(45deg, 
            rgba(50, 50, 150, 0.3), 
            rgba(150, 50, 150, 0.3));
    background-size: 
        100px 200px, 
        100px 200px, 
        200px 100px, 
        200px 100px,
        100% 100%;
    animation: waveMotion 8s ease-in-out infinite;
}

@keyframes waveMotion {
    0%, 100% {
        background-position: 
            0% 0%, 
            100% 0%, 
            0% 0%, 
            0% 100%,
            0% 0%;
        transform: scaleX(1) scaleY(1) rotate(0deg);
        filter: hue-rotate(0deg);
    }
    25% {
        background-position: 
            -20% 25%, 
            120% -25%, 
            25% -20%, 
            -25% 120%,
            0% 0%;
        transform: scaleX(1.1) scaleY(0.9) rotate(2deg);
        filter: hue-rotate(45deg);
    }
    50% {
        background-position: 
            0% 50%, 
            100% 50%, 
            50% 0%, 
            50% 100%,
            0% 0%;
        transform: scaleX(0.9) scaleY(1.1) rotate(0deg);
        filter: hue-rotate(90deg);
    }
    75% {
        background-position: 
            20% 75%, 
            80% 25%, 
            75% 20%, 
            25% 80%,
            0% 0%;
        transform: scaleX(1.1) scaleY(0.9) rotate(-2deg);
        filter: hue-rotate(135deg);
    }
}

/* 背景タイプ9: 波紋（リップル） */
.bg-ripple {
    background: 
        /* 中心からの波紋1 */
        radial-gradient(circle at 50% 50%, 
            transparent 20%, 
            rgba(100, 200, 255, 0.7) 25%, 
            transparent 30%, 
            rgba(255, 100, 200, 0.7) 35%, 
            transparent 40%),
        /* 中心からの波紋2 */
        radial-gradient(circle at 30% 70%, 
            transparent 15%, 
            rgba(200, 255, 100, 0.6) 20%, 
            transparent 25%, 
            rgba(255, 200, 100, 0.6) 30%, 
            transparent 35%),
        /* 中心からの波紋3 */
        radial-gradient(circle at 70% 30%, 
            transparent 10%, 
            rgba(255, 255, 100, 0.5) 15%, 
            transparent 20%, 
            rgba(100, 255, 255, 0.5) 25%, 
            transparent 30%);
    background-size: 200px 200px, 150px 150px, 180px 180px;
    animation: rippleMotion 10s linear infinite;
}

@keyframes rippleMotion {
    0% {
        background-position: 50% 50%, 30% 70%, 70% 30%;
        background-size: 50px 50px, 40px 40px, 45px 45px;
        opacity: 0.8;
    }
    50% {
        background-position: 50% 50%, 30% 70%, 70% 30%;
        background-size: 200px 200px, 150px 150px, 180px 180px;
        opacity: 0.9;
    }
    100% {
        background-position: 50% 50%, 30% 70%, 70% 30%;
        background-size: 300px 300px, 250px 250px, 280px 280px;
        opacity: 0.3;
    }
}

/* 背景なし */
.bg-none {
    display: none;
}

/* レスポンシブ対応 */
@media (max-width: 768px) {
    .battle-background {
        opacity: 0.4; /* モバイルでは少し薄く */
    }
    
    /* アニメーションを軽くする */
    .bg-psychedelic { animation-duration: 12s; }
    .bg-geometric { animation-duration: 18s; }
    .bg-energy { animation-duration: 9s; }
    .bg-starfield { animation-duration: 20s; }
    .bg-liquid { animation-duration: 15s; }
    .bg-glitch { animation-duration: 6s; }
    .bg-crystal { animation-duration: 12s; }
}

/* 高コントラストモード対応 */
@media (prefers-reduced-motion: reduce) {
    .battle-background {
        animation: none !important;
        opacity: 0.3;
    }
}
